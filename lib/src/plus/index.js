"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const build_angular_1 = require("@angular-devkit/build-angular");
const core_1 = require("@angular-devkit/core");
const path = require("path");
const webpackMerge = require('webpack-merge');
class PlusBuilder extends build_angular_1.BrowserBuilder {
    buildWebpackConfig(root, projectRoot, host, options) {
        const elementsOptions = options;
        let config = super.buildWebpackConfig(root, projectRoot, host, options);
        if (options.singleBundle) {
            delete config.entry.polyfills;
            delete config.entry.styles;
            delete config.optimization;
        }
        if (options.extraWebpackConfig) {
            const filePath = path.resolve(core_1.getSystemPath(projectRoot), options.extraWebpackConfig);
            const additionalConfig = require(filePath);
            config = webpackMerge([config, additionalConfig]);
        }
        return config;
    }
}
exports.PlusBuilder = PlusBuilder;
exports.default = PlusBuilder;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiQzovVXNlcnMvTWFuZnJlZC9Eb2N1bWVudHMvZXhwZXJpbWVudGUvbmd4LWJ1aWxkLWVsZW1lbnRzL2xpYi8iLCJzb3VyY2VzIjpbInNyYy9wbHVzL2luZGV4LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsaUVBQStGO0FBQy9GLCtDQUFzRTtBQUV0RSw2QkFBNkI7QUFHN0IsTUFBTSxZQUFZLEdBQUcsT0FBTyxDQUFDLGVBQWUsQ0FBQyxDQUFDO0FBRTlDLGlCQUF5QixTQUFRLDhCQUFjO0lBRTdDLGtCQUFrQixDQUNoQixJQUFVLEVBQ1YsV0FBaUIsRUFDakIsSUFBOEIsRUFDOUIsT0FBMEI7UUFHMUIsTUFBTSxlQUFlLEdBQUcsT0FBNEIsQ0FBQztRQUVyRCxJQUFJLE1BQU0sR0FBRyxLQUFLLENBQUMsa0JBQWtCLENBQUMsSUFBSSxFQUFFLFdBQVcsRUFBRSxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUM7UUFFeEUsSUFBSSxPQUFPLENBQUMsWUFBWSxFQUFFO1lBQ3hCLE9BQU8sTUFBTSxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQUM7WUFDOUIsT0FBTyxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQztZQUMzQixPQUFPLE1BQU0sQ0FBQyxZQUFZLENBQUM7U0FDNUI7UUFFRCxJQUFJLE9BQU8sQ0FBQyxrQkFBa0IsRUFBRTtZQUM5QixNQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLG9CQUFhLENBQUMsV0FBVyxDQUFDLEVBQUUsT0FBTyxDQUFDLGtCQUFrQixDQUFDLENBQUM7WUFDdEYsTUFBTSxnQkFBZ0IsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7WUFDM0MsTUFBTSxHQUFHLFlBQVksQ0FBQyxDQUFDLE1BQU0sRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDLENBQUM7U0FDbkQ7UUFFRCxPQUFPLE1BQU0sQ0FBQztJQUNoQixDQUFDO0NBQ0Y7QUEzQkQsa0NBMkJDO0FBRUQsa0JBQWUsV0FBVyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQnJvd3NlckJ1aWxkZXIsIE5vcm1hbGl6ZWRCcm93c2VyQnVpbGRlclNjaGVtYSB9IGZyb20gJ0Bhbmd1bGFyLWRldmtpdC9idWlsZC1hbmd1bGFyJztcclxuaW1wb3J0IHsgUGF0aCwgdmlydHVhbEZzLCBnZXRTeXN0ZW1QYXRoIH0gZnJvbSAnQGFuZ3VsYXItZGV2a2l0L2NvcmUnO1xyXG5pbXBvcnQgKiBhcyBmcyBmcm9tICdmcyc7XHJcbmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7XHJcbmltcG9ydCB7IFBsdXNCdWlsZGVyU2NoZW1hIH0gZnJvbSAnLi9zY2hlbWEnO1xyXG5cclxuY29uc3Qgd2VicGFja01lcmdlID0gcmVxdWlyZSgnd2VicGFjay1tZXJnZScpO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBsdXNCdWlsZGVyIGV4dGVuZHMgQnJvd3NlckJ1aWxkZXIgIHtcclxuXHJcbiAgYnVpbGRXZWJwYWNrQ29uZmlnKFxyXG4gICAgcm9vdDogUGF0aCxcclxuICAgIHByb2plY3RSb290OiBQYXRoLFxyXG4gICAgaG9zdDogdmlydHVhbEZzLkhvc3Q8ZnMuU3RhdHM+LFxyXG4gICAgb3B0aW9uczogUGx1c0J1aWxkZXJTY2hlbWEsXHJcbiAgKSB7XHJcblxyXG4gICAgY29uc3QgZWxlbWVudHNPcHRpb25zID0gb3B0aW9ucyBhcyBQbHVzQnVpbGRlclNjaGVtYTtcclxuXHJcbiAgICBsZXQgY29uZmlnID0gc3VwZXIuYnVpbGRXZWJwYWNrQ29uZmlnKHJvb3QsIHByb2plY3RSb290LCBob3N0LCBvcHRpb25zKTtcclxuXHJcbiAgICBpZiAob3B0aW9ucy5zaW5nbGVCdW5kbGUpIHtcclxuICAgICAgZGVsZXRlIGNvbmZpZy5lbnRyeS5wb2x5ZmlsbHM7XHJcbiAgICAgIGRlbGV0ZSBjb25maWcuZW50cnkuc3R5bGVzO1xyXG4gICAgICBkZWxldGUgY29uZmlnLm9wdGltaXphdGlvbjtcclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKG9wdGlvbnMuZXh0cmFXZWJwYWNrQ29uZmlnKSB7XHJcbiAgICAgIGNvbnN0IGZpbGVQYXRoID0gcGF0aC5yZXNvbHZlKGdldFN5c3RlbVBhdGgocHJvamVjdFJvb3QpLCBvcHRpb25zLmV4dHJhV2VicGFja0NvbmZpZyk7XHJcbiAgICAgIGNvbnN0IGFkZGl0aW9uYWxDb25maWcgPSByZXF1aXJlKGZpbGVQYXRoKTtcclxuICAgICAgY29uZmlnID0gd2VicGFja01lcmdlKFtjb25maWcsIGFkZGl0aW9uYWxDb25maWddKTtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gY29uZmlnO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUGx1c0J1aWxkZXI7XHJcbiJdfQ==